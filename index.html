<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3í•™ë…„ ì¹­ì°¬ìŠ¤í‹°ì»¤íŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 3px solid #e9ecef;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-width: 150px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #ff6b6b;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .class-tabs {
            display: flex;
            background: #e9ecef;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1.1em;
            font-weight: bold;
            color: #666;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab.active {
            background: white;
            color: #ff6b6b;
            border-bottom: 3px solid #ff6b6b;
        }

        .tab:hover {
            background: #f8f9fa;
        }

        .class-content {
            padding: 30px;
            display: none;
        }

        .class-content.active {
            display: block;
        }

        .class-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border-radius: 15px;
        }

        .class-title {
            font-size: 1.8em;
            font-weight: bold;
        }

        .class-total {
            font-size: 1.5em;
            font-weight: bold;
        }

        .students-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .student-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .student-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-color: #ff6b6b;
        }

        .student-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .student-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #2d3436;
        }

        .student-number {
            background: #ddd6fe;
            color: #7c3aed;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .score-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .score-display {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stars {
            color: #ffd700;
            font-size: 1.5em;
        }

        .score-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #ff6b6b;
        }

        .score-controls {
            display: flex;
            gap: 10px;
        }

        .score-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .score-btn.plus {
            background: linear-gradient(135deg, #00b894, #00a085);
        }

        .score-btn.minus {
            background: linear-gradient(135deg, #e17055, #d63031);
        }

        .score-btn:hover {
            transform: scale(1.1);
        }

        .memo-section {
            margin-top: 15px;
        }

        .memo-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 0.9em;
            transition: border-color 0.3s ease;
        }

        .memo-input:focus {
            outline: none;
            border-color: #74b9ff;
        }

        .memo-list {
            margin-top: 10px;
            max-height: 150px;
            overflow-y: auto;
        }

        .memo-item {
            background: #f8f9fa;
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 5px;
            font-size: 0.85em;
            border-left: 3px solid #74b9ff;
        }

        .memo-item.negative {
            border-left-color: #e17055;
        }

        .memo-date {
            color: #666;
            font-size: 0.8em;
        }

        .memo-text {
            margin-top: 3px;
        }

        .top-performers {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            color: white;
            padding: 25px;
            margin: 20px 0;
            border-radius: 15px;
            text-align: center;
        }

        .top-performers h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .top-list {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .top-item {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .crown {
            font-size: 2em;
            margin-bottom: 5px;
        }

        @media (max-width: 768px) {
            .students-grid {
                grid-template-columns: 1fr;
            }
            
            .class-tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1;
                min-width: 100px;
            }
            
            .top-list {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒŸ 3í•™ë…„ ì¹­ì°¬ìŠ¤í‹°ì»¤íŒ ğŸŒŸ</h1>
            <p>ë§¤ë‹¬ ìµœê³ ì˜ ë°˜ê³¼ í•™ìƒì„ ì°¾ì•„ë³´ì„¸ìš”!</p>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalStudents">156</div>
                <div class="stat-label">ì „ì²´ í•™ìƒ ìˆ˜</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalStickers">0</div>
                <div class="stat-label">ì „ì²´ ìŠ¤í‹°ì»¤ ìˆ˜</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="topClass">-</div>
                <div class="stat-label">1ë“± ë°˜</div>
            </div>
        </div>

        <div class="top-performers">
            <h3>ğŸ† ì´ë‹¬ì˜ TOP 3 ğŸ†</h3>
            <div class="top-list" id="topPerformers">
                <div class="top-item">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>
            </div>
        </div>

        <div class="class-tabs">
            <button class="tab active" onclick="showClass('class1')">3í•™ë…„ 1ë°˜</button>
            <button class="tab" onclick="showClass('class2')">3í•™ë…„ 2ë°˜</button>
            <button class="tab" onclick="showClass('class3')">3í•™ë…„ 3ë°˜</button>
            <button class="tab" onclick="showClass('class4')">3í•™ë…„ 4ë°˜</button>
            <button class="tab" onclick="showClass('class5')">3í•™ë…„ 5ë°˜</button>
            <button class="tab" onclick="showClass('class6')">3í•™ë…„ 6ë°˜</button>
        </div>

        <div id="class1" class="class-content active">
            <div class="class-header">
                <div class="class-title">3í•™ë…„ 1ë°˜</div>
                <div class="class-total">ë°˜ ì´í•©: <span id="class1-total">0</span>ì </div>
            </div>
            <div class="students-grid" id="students-class1"></div>
        </div>

        <div id="class2" class="class-content">
            <div class="class-header">
                <div class="class-title">3í•™ë…„ 2ë°˜</div>
                <div class="class-total">ë°˜ ì´í•©: <span id="class2-total">0</span>ì </div>
            </div>
            <div class="students-grid" id="students-class2"></div>
        </div>

        <div id="class3" class="class-content">
            <div class="class-header">
                <div class="class-title">3í•™ë…„ 3ë°˜</div>
                <div class="class-total">ë°˜ ì´í•©: <span id="class3-total">0</span>ì </div>
            </div>
            <div class="students-grid" id="students-class3"></div>
        </div>

        <div id="class4" class="class-content">
            <div class="class-header">
                <div class="class-title">3í•™ë…„ 4ë°˜</div>
                <div class="class-total">ë°˜ ì´í•©: <span id="class4-total">0</span>ì </div>
            </div>
            <div class="students-grid" id="students-class4"></div>
        </div>

        <div id="class5" class="class-content">
            <div class="class-header">
                <div class="class-title">3í•™ë…„ 5ë°˜</div>
                <div class="class-total">ë°˜ ì´í•©: <span id="class5-total">0</span>ì </div>
            </div>
            <div class="students-grid" id="students-class5"></div>
        </div>

        <div id="class6" class="class-content">
            <div class="class-header">
                <div class="class-title">3í•™ë…„ 6ë°˜</div>
                <div class="class-total">ë°˜ ì´í•©: <span id="class6-total">0</span>ì </div>
            </div>
            <div class="students-grid" id="students-class6"></div>
        </div>
    </div>

    <script>
        // í•™ìƒ ë°ì´í„°
        const studentsData = {
            class1: [
                {number: 1, name: 'ê°„ë¯¼ì¤€'}, {number: 2, name: 'ê¶Œì˜ˆí•œ'}, {number: 3, name: 'ê¹€ëŒ€í•œ'}, 
                {number: 4, name: 'ê¹€ì„œì •'}, {number: 5, name: 'ê¹€ì„ ìœ¨'}, {number: 6, name: 'ê¹€ìŠ¹ë¯¼'}, 
                {number: 7, name: 'ê¹€ì¬ì›'}, {number: 8, name: 'ê¹€ì •ìˆ˜'}, {number: 9, name: 'ê¹€í•´ì›'}, 
                {number: 10, name: 'ë‚¨ê¶ê±´'}, {number: 11, name: 'ë…¸í˜„ìŠ¹'}, {number: 13, name: 'ë°±ì„œìœ¨'}, 
                {number: 14, name: 'ë³€ì„±í˜„'}, {number: 15, name: 'ì†¡í˜¸ê·¼'}, {number: 16, name: 'ì›ìƒì§„'}, 
                {number: 17, name: 'ìœ ë™ê±´'}, {number: 18, name: 'ìœ¤í˜œì„±'}, {number: 19, name: 'ì´ì‹œìœ¤'}, 
                {number: 20, name: 'ì •ë‹¤ê²€'}, {number: 21, name: 'ìµœê·¼ì°¬'}, {number: 22, name: 'ìµœì‹œìš°'}, 
                {number: 23, name: 'ìµœì‹œí›ˆ'}, {number: 24, name: 'ì¶”ì •ìš°'}, {number: 25, name: 'í•œì¤€í¬'}, 
                {number: 26, name: 'í—ˆë¦¬ì›'}, {number: 27, name: 'í™ì£¼í˜¸'}
            ],
            class2: [
                {number: 1, name: 'ê°•ë¯¼ì¬'}, {number: 2, name: 'ê²½ë•ê·œ'}, {number: 3, name: 'ê³½ëª…ì„'}, 
                {number: 4, name: 'êµ¬êµì›'}, {number: 5, name: 'ê¶Œìœ ë¹ˆ'}, {number: 6, name: 'ê¹€ì¬ì›…'}, 
                {number: 7, name: 'ê¹€íƒœìˆ˜'}, {number: 8, name: 'ë‚˜ìŠ¹í˜„'}, {number: 9, name: 'ë…¸í•´ì¼'}, 
                {number: 10, name: 'ë°•ê±´íœ˜'}, {number: 11, name: 'ë°•ì†¡ìš°'}, {number: 12, name: 'ì†¡ì¸ì—½'}, 
                {number: 13, name: 'ì•ˆì¬í™'}, {number: 14, name: 'ìœ¤ì„œì§„'}, {number: 15, name: 'ì´ìƒì¤€'}, 
                {number: 16, name: 'ì´ìˆ˜í•œ'}, {number: 17, name: 'ì´ìŠ¹í˜„'}, {number: 18, name: 'ì •ìš°ì§„'}, 
                {number: 20, name: 'ì§€ì„±ì •'}, {number: 21, name: 'ì§„ì—°ìš°'}, {number: 22, name: 'ì°¨ìœ¤í˜¸'}, 
                {number: 23, name: 'ì°¨ì€ì°¬'}, {number: 24, name: 'ìµœì¬ìš°'}, {number: 25, name: 'ìµœí˜¸ì˜'}, 
                {number: 26, name: 'í•˜ì„ì£¼'}, {number: 27, name: 'ê¹€ë™í˜'}
            ],
            class3: [
                {number: 1, name: 'ê¸¸ì„±í˜¸'}, {number: 2, name: 'ê¹€ë¯¼ì¤€'}, {number: 3, name: 'ê¹€ì˜ì¤€'}, 
                {number: 4, name: 'ê¹€ì¬ì‹ '}, {number: 5, name: 'ë‚¨ìŠ¹ì°¬'}, {number: 6, name: 'ë¬¸ì£¼í™˜'}, 
                {number: 7, name: 'ë¯¼ì •ê¸°'}, {number: 8, name: 'ë°•ì€ì°¬'}, {number: 9, name: 'ë°•ì£¼í˜'}, 
                {number: 10, name: 'ì†ì˜ì² '}, {number: 11, name: 'ì†ì •í›ˆ'}, {number: 12, name: 'ì†¡ë¯¼ì œ'}, 
                {number: 13, name: 'ì‹¬ìš°ì£¼'}, {number: 14, name: 'ì›ì¤€í˜'}, {number: 15, name: 'ì´ë‚™ì—°'}, 
                {number: 16, name: 'ì´í•˜ìœ¤'}, {number: 17, name: 'ì¥ì„±ìš±'}, {number: 18, name: 'ì „ë„ìœ¤'}, 
                {number: 19, name: 'ì •ëª…í›ˆ'}, {number: 20, name: 'ì •ì„œí›„'}, {number: 21, name: 'ì •ì§„ì„­'}, 
                {number: 22, name: 'ì£¼í˜„ìš°'}, {number: 23, name: 'ìµœë¯¼ì¤€'}, {number: 24, name: 'ìµœìš°ì§„'}, 
                {number: 25, name: 'ìµœì¸ìš°'}, {number: 26, name: 'í•œê²°'}
            ],
            class4: [
                {number: 1, name: 'ê¶Œì§€í›„'}, {number: 2, name: 'ê¹€ë™í›„'}, {number: 3, name: 'ê¹€ë¯¼ê¸°'}, 
                {number: 4, name: 'ê¹€ìœ ë˜'}, {number: 5, name: 'ê¹€ì£¼ì˜'}, {number: 6, name: 'ê¹€ì£¼í™˜'}, 
                {number: 7, name: 'ê¹€ì¤€í˜'}, {number: 8, name: 'ë¬¸ì •í™˜'}, {number: 9, name: 'ë°•ê±´í˜¸'}, 
                {number: 10, name: 'ë°•ë¯¼ì°¬'}, {number: 11, name: 'ì„œìœ¤ê±´'}, {number: 12, name: 'ì›íƒœì—°'}, 
                {number: 13, name: 'ì´ë™ê·œ'}, {number: 14, name: 'ì´ë£¨ë‹¤'}, {number: 15, name: 'ì´ì—°ìˆ˜'}, 
                {number: 16, name: 'ì´ì •ë¯¼'}, {number: 17, name: 'ì´ì •í˜‘'}, {number: 18, name: 'ì´í•˜ìœ¨'}, 
                {number: 19, name: 'ìµœëª…ê·œ'}, {number: 20, name: 'ìµœë¯¼ì¤€'}, {number: 21, name: 'ìµœìœ¤ëª¨'}, 
                {number: 22, name: 'ìµœìœ¤í˜¸'}, {number: 23, name: 'ìµœì¤€ìš°'}, {number: 24, name: 'í•˜ì •ë¯¼'}, 
                {number: 25, name: 'í—ˆì„±ë¹ˆ'}, {number: 26, name: 'í™í˜„ìš°'}
            ],
            class5: [
                {number: 1, name: 'ê°•ìŠ¹ìœ¤'}, {number: 2, name: 'ê¶Œê¸°í™˜'}, {number: 3, name: 'ê¸¸ì°¬í˜¸'}, 
                {number: 4, name: 'ê¹€ë¬¸ì›'}, {number: 5, name: 'ê¹€ìœ¤í˜¸'}, {number: 6, name: 'ê¹€ì •í›„'}, 
                {number: 7, name: 'ê¹€í˜¸ì¸'}, {number: 8, name: 'ë¬¸í˜„ì„±'}, {number: 9, name: 'ë°•ëª…ì¬'}, 
                {number: 10, name: 'ë°•ìƒì§„'}, {number: 11, name: 'ì‹¬ë¬¸ìˆ˜'}, {number: 12, name: 'ìœ ì§€ì„±'}, 
                {number: 13, name: 'ì´ì„œìš°'}, {number: 14, name: 'ì´ì‹œí›„'}, {number: 15, name: 'ì´ìœ¤ìˆ˜'}, 
                {number: 16, name: 'ì´ì¶©ì›'}, {number: 17, name: 'ì´í˜„ë„'}, {number: 18, name: 'ì´íš¨ì›'}, 
                {number: 19, name: 'ì„ì •ë¬µ'}, {number: 20, name: 'ì¥ì¤€ê·œ'}, {number: 21, name: 'ì •ì§€í™˜'}, 
                {number: 22, name: 'ìµœê·¼ìš°'}, {number: 23, name: 'ìµœì€í˜'}, {number: 24, name: 'ìµœíƒœì˜'}, 
                {number: 25, name: 'í—ˆì€ì„±'}, {number: 26, name: 'í™í•´ì†”'}
            ],
            class6: [
                {number: 1, name: 'ê°•ì§€í˜¸'}, {number: 2, name: 'ê¹€ê´€í˜•'}, {number: 3, name: 'ê¹€ì¸ì„±'}, 
                {number: 4, name: 'ê¹€ë¯¼ì¤€'}, {number: 5, name: 'ê¹€ì •ìš°'}, {number: 6, name: 'ê¹€ì£¼ì›'}, 
                {number: 7, name: 'ê¹€ì¤€ìˆ˜'}, {number: 8, name: 'ê¹€í˜•ê²½'}, {number: 9, name: 'ì„œì•„í˜„'}, 
                {number: 10, name: 'ì„œì°¬ì„±'}, {number: 11, name: 'ì†¡ì˜ˆì¤€'}, {number: 12, name: 'ì‹ ì€ìˆ˜'}, 
                {number: 13, name: 'ì‹¬ìš°ì§„'}, {number: 14, name: 'ìœ¤ì„¸ìœ¤'}, {number: 15, name: 'ì´ê°€ëŒ'}, 
                {number: 16, name: 'ì´ë™ê¶Œ'}, {number: 17, name: 'ì´ë™ì„ '}, {number: 18, name: 'ì´ìœ¨ë¯¼'}, 
                {number: 19, name: 'ì´ì¤€ë¯¼'}, {number: 20, name: 'ì´í˜¸í˜„'}, {number: 21, name: 'ì„ì¢…í˜„'}, 
                {number: 22, name: 'ì¥ë¯¼'}, {number: 23, name: 'ì¥í˜„í˜¸'}, {number: 24, name: 'ì •ë¯¼í˜'}, 
                {number: 25, name: 'ì¡°í•˜ëŒ'}, {number: 26, name: 'ìµœê·œí™”'}
            ]
        };

        // ë°ì´í„° ë³€ìˆ˜
        let studentScores = {};
        let studentMemos = {};

        // ë°ì´í„° ë¡œë“œ
        function loadData() {
            try {
                const savedScores = JSON.parse(localStorage.getItem('studentScores') || '{}');
                const savedMemos = JSON.parse(localStorage.getItem('studentMemos') || '{}');
                studentScores = savedScores;
                studentMemos = savedMemos;
            } catch (e) {
                studentScores = {};
                studentMemos = {};
            }
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            try {
                localStorage.setItem('studentScores', JSON.stringify(studentScores));
                localStorage.setItem('studentMemos', JSON.stringify(studentMemos));
            } catch (e) {
                console.log('ì €ì¥ ì‹¤íŒ¨');
            }
        }

        // ë³„í‘œ ìƒì„±
        function getStars(score) {
            return 'â­'.repeat(Math.max(0, score));
        }

        // ë°˜ ì „í™˜
        function showClass(className) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.class-content').forEach(content => content.style.display = 'none');
            
            const targetTab = document.querySelector(`button[onclick="showClass('${className}')"]`);
            if (targetTab) targetTab.classList.add('active');
            
            const targetContent = document.getElementById(className);
            if (targetContent) targetContent.style.display = 'block';
        }

        // ì ìˆ˜ ì—…ë°ì´íŠ¸
        function updateScore(classNum, studentNum, change, memo) {
            const key = `class${classNum}-${studentNum}`;
            
            if (!studentScores[key]) studentScores[key] = 0;
            if (!studentMemos[key]) studentMemos[key] = [];

            studentScores[key] += change;
            
            if (memo && memo.trim()) {
                studentMemos[key].push({
                    date: new Date().toLocaleString('ko-KR'),
                    text: memo,
                    change: change,
                    recorder: 'ì„ ìƒë‹˜'
                });
            }

            updateDisplay();
            saveData();
        }

        // í™”ë©´ ì—…ë°ì´íŠ¸
        function updateDisplay() {
            // ëª¨ë“  í•™ìƒ ì¹´ë“œ ì—…ë°ì´íŠ¸
            Object.keys(studentsData).forEach(className => {
                const classNum = className.replace('class', '');
                studentsData[className].forEach(student => {
                    updateStudentCard(classNum, student.number);
                });
                updateClassTotal(classNum);
            });
            
            updateStats();
            updateTopPerformers();
        }

        // í•™ìƒ ì¹´ë“œ ì—…ë°ì´íŠ¸
        function updateStudentCard(classNum, studentNum) {
            const key = `class${classNum}-${studentNum}`;
            const score = studentScores[key] || 0;
            const memos = studentMemos[key] || [];

            const scoreEl = document.getElementById(`score-${key}`);
            const starsEl = document.getElementById(`stars-${key}`);
            const memosEl = document.getElementById(`memos-${key}`);

            if (scoreEl) scoreEl.textContent = score;
            if (starsEl) starsEl.textContent = getStars(score);
            
            if (memosEl) {
                memosEl.innerHTML = memos.slice(-3).map(memo => {
                    const sign = memo.change > 0 ? '+' : '';
                    const negClass = memo.change < 0 ? 'negative' : '';
                    return `<div class="memo-item ${negClass}">
                        <div class="memo-date">${memo.date} (${memo.recorder})</div>
                        <div class="memo-text">${sign}${memo.change}ì : ${memo.text}</div>
                    </div>`;
                }).join('');
            }
        }

        // ë°˜ ì´í•© ì—…ë°ì´íŠ¸
        function updateClassTotal(classNum) {
            const students = studentsData[`class${classNum}`];
            let total = 0;
            
            students.forEach(student => {
                const key = `class${classNum}-${student.number}`;
                total += studentScores[key] || 0;
            });

            const totalEl = document.getElementById(`class${classNum}-total`);
            if (totalEl) totalEl.textContent = total;
        }

        // ì „ì²´ í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            let totalStickers = 0;
            let classTotals = {};

            for (let i = 1; i <= 6; i++) {
                let classTotal = 0;
                const students = studentsData[`class${i}`];
                
                students.forEach(student => {
                    const score = studentScores[`class${i}-${student.number}`] || 0;
                    totalStickers += score;
                    classTotal += score;
                });
                
                classTotals[i] = classTotal;
            }

            const topClass = Object.keys(classTotals).reduce((a, b) => 
                classTotals[a] > classTotals[b] ? a : b
            );

            document.getElementById('totalStickers').textContent = totalStickers;
            document.getElementById('topClass').textContent = 
                classTotals[topClass] > 0 ? `3-${topClass}ë°˜` : '-';
        }

        // ìƒìœ„ í•™ìƒ ì—…ë°ì´íŠ¸
        function updateTopPerformers() {
            let allStudents = [];

            for (let i = 1; i <= 6; i++) {
                studentsData[`class${i}`].forEach(student => {
                    const score = studentScores[`class${i}-${student.number}`] || 0;
                    if (score > 0) {
                        allStudents.push({
                            name: student.name,
                            score: score,
                            class: i,
                            number: student.number
                        });
                    }
                });
            }

            allStudents.sort((a, b) => b.score - a.score);
            const top3 = allStudents.slice(0, 3);
            const crowns = ['ğŸ‘‘', 'ğŸ¥ˆ', 'ğŸ¥‰'];

            const html = top3.length > 0 ? 
                top3.map((student, idx) => `
                    <div class="top-item">
                        <div class="crown">${crowns[idx]}</div>
                        <div><strong>${student.name}</strong></div>
                        <div>3-${student.class}ë°˜ ${student.number}ë²ˆ</div>
                        <div>${student.score}ì  â­</div>
                    </div>
                `).join('') : 
                '<div class="top-item">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>';

            document.getElementById('topPerformers').innerHTML = html;
        }

        // í•™ìƒ ì¹´ë“œ ìƒì„±
        function createStudentCards() {
            Object.keys(studentsData).forEach(className => {
                const classNum = className.replace('class', '');
                const container = document.getElementById(`students-${className}`);
                
                const cards = studentsData[className].map(student => {
                    const key = `class${classNum}-${student.number}`;
                    return `
                        <div class="student-card">
                            <div class="student-info">
                                <div class="student-name">${student.name}</div>
                                <div class="student-number">${student.number}ë²ˆ</div>
                            </div>
                            <div class="score-section">
                                <div class="score-display">
                                    <div class="stars" id="stars-${key}">â­</div>
                                    <div class="score-number" id="score-${key}">0</div>
                                </div>
                                <div class="score-controls">
                                    <button class="score-btn plus" onclick="addPoint(${classNum}, ${student.number})">+</button>
                                    <button class="score-btn minus" onclick="subtractPoint(${classNum}, ${student.number})">-</button>
                                </div>
                            </div>
                            <div class="memo-section">
                                <input type="text" class="memo-input" 
                                       placeholder="ì ìˆ˜ ë³€ê²½ ì´ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." 
                                       id="memo-input-${key}">
                                <div class="memo-list" id="memos-${key}"></div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                container.innerHTML = cards;
            });
        }

        // ì ìˆ˜ ì¶”ê°€
        function addPoint(classNum, studentNum) {
            const key = `class${classNum}-${studentNum}`;
            const memoInput = document.getElementById(`memo-input-${key}`);
            const memo = memoInput ? memoInput.value.trim() : '';
            
            updateScore(classNum, studentNum, 1, memo);
            
            if (memoInput) memoInput.value = '';
        }

        // ì ìˆ˜ ê°ì†Œ
        function subtractPoint(classNum, studentNum) {
            const key = `class${classNum}-${studentNum}`;
            const memoInput = document.getElementById(`memo-input-${key}`);
            const memo = memoInput ? memoInput.value.trim() : '';
            
            updateScore(classNum, studentNum, -1, memo);
            
            if (memoInput) memoInput.value = '';
        }

        // ì´ˆê¸°í™”
        function init() {
            loadData();
            createStudentCards();
            updateDisplay();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('load', init);
        window.addEventListener('beforeunload', saveData);
        setInterval(saveData, 5000);
    </script>
</body>
</html>
